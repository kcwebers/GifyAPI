<!DOCTYPE html>
<html class="bg-danger" style="height: 100%;" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src= 'http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>

    <title>Gify!</title>
</head>
<body class="shadow p-3 m-3">
    <div class="container text-center">

        <a href="" class="refresh btn btn-danger mt-4">Go Again?</a>

        <div class="search mb-4 my-auto">
            <h1 class="display-2">Let's look for a <span class="text-danger">.gif</span>!</h1>

            <input id="searchVal" class="form-control mb-4" type="text" placeholder="Whatcha Lookin' For?">
            <div class="form-group">

                <input id="limit" class="form-control mb-4" type="text" placeholder="How Many Results Do You Want?">
                <small class="text-danger small">If you don't tell us, we'll give you 25!</small>
            </div>
            <button id="searchBtn" class="btn btn-dark">Search</button>

        </div>

        <div class="results m-4">
        </div>
    
    </div> 

   
</body>
<script>
    $(document).ready(function(){
        console.log("helllo there")

        $('.refresh').hide()

        $('#searchBtn').click(function(){
            $('.search').hide()
            $('.refresh').show()

            var searchVal = document.getElementById("searchVal").value;
            var limit = document.getElementById("limit").value
            console.log(searchVal) 
        
            $.get("http://api.giphy.com/v1/gifs/search?q=" + searchVal + "&api_key=GmEfOBwHF9Cr3YYA4xGppDBFSd2e7ytA&limit=" + limit).done(function(data) { 
                console.log("success got data", data); 

                if(data.data.length < 1) {
                    $('.results').append('<h1 class="display-4">Showing <span class="text-danger"> 0 </span> Results! </h1> <h1 class="display-4">Please give us something different to search for!</h1>') 
                } else {
                    $('.results').append('<h1 class="display-4">Showing <span class="text-danger">' + limit + '</span> Results for <span class="text-danger"> "' + searchVal + ' "</span></h1>') 
                    for(var i = 0 ; i < data.data.length ; i ++) {
                        console.log(data.data[i].id);
                        $('.results').append('<img class="shadow p-3 m-3 bg-white rounded" src="' + data.data[i].images.fixed_height.url + '" alt="' + data.data[i].title + '">')
                    }
                } 
            }); 
            
            $('.refresh').click(function(){
                location.reload(true);
            });
        })
    });
</script>
</html>